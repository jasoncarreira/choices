<template>
  <require from="./int-format"></require>
  <require from="./currency-format"></require>
  <ai-dialog>
    <ai-dialog-body>
      <form validation-renderer="materialize-form" validation-errors.bind="formErrors">
      <div class="row">
        <div class="col s12"><h2>Edit Account ${account.name}</h2></div>
      </div>
      <div class="row">
        <div class="col s12">
          <md-input md-label="Account Name" md-value.bind="account.name & validate"></md-input>
          <select md-select value.two-way="account.type & validate">
            <option value="" disabled selected>select an account type</option>
            <option value="401k">401(k) / 403(b)</option>
            <option value="hsa">HSA</option>
          </select>
          <md-input md-label="Account Balance" md-value.bind="account.balance | intFormat & debounce & validate" md-type="number"></md-input>
          <md-input md-label="Account Contribution" md-value.bind="account.contribution | intFormat & debounce & validate" md-type="number"></md-input>
        </div>
      </div>
      <div class="row">
        <div class="col s4"><md-input md-label="Stock %" md-value.bind="account.stockPercentage | intFormat & validate" md-type="number"></md-input></div>
        <div class="col s4"><md-input md-label="Bond %" md-value.bind="account.bondPercentage | intFormat & validate" md-type="number"></md-input></div>
        <div class="col s4"><md-input md-label="Cash %" md-value.bind="account.cashPercentage | intFormat & validate" md-type="number"></md-input></div>
      </div>
      </form>
      <div class="row">
        <div class="col s12">
          <ul>
            <li repeat.for="errorInfo of formErrors">
              ${errorInfo.error.message}
              <a href="#" click.delegate="errorInfo.target.querySelector('input').focus()"> Fix it</a>
            </li>
          </ul>
        </div>
      </div>
    </ai-dialog-body>

    <ai-dialog-footer class="right">
      <div class="row"><div class="col s12">
      <button md-button class="primary" click.trigger="cancel()">Cancel</button>
      <button md-button click.trigger="ok()">Ok</button>
      </div>
      </div>
    </ai-dialog-footer>
  </ai-dialog>
</template>
